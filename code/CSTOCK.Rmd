---
title: "CSTOCK"
author: "Boreal"
date: "2023-02-22"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

# Libraries=============================
```{r message=FALSE, warning=FALSE}
library(xlsx)
library(readxl)
library(psych)
library(dplyr)
library(ggplot2)
library(factoextra)
library(FactoMineR)
library(ade4)
library(car)
library(corrplot)
library(graphics)
library(pvclust)
library(doBy)
library(ggpubr)
library(scales)
require(ggthemes)
require(ggpmisc)
library(beanplot)
library(multcomp)
require(multcomp)
library(lubridate)
library(MASS)
library(TraMineR)
library(vegan)
library(tidyverse)
library(rstatix)
library(ggpubr)
library(cowplot)
library(gmt)
library(geosphere)
library(rlang)
library(plyr)
library(ggplot2)
library(nlme)
library(lme4) 
library(gridExtra)
library(GGally)
library(devtools) 
install_github("vqv/ggbiplot")
library(ggbiplot)
library(reshape2)
library(PMCMR)
library(RVAideMemoire)
library(MuMIn)
library(visreg)
```

```{r data acquire}
workbook<- "D:/R/CSTOCK1/data/CSTOCK.xlsx"
cstock<-read.xlsx(workbook, 1, colClasses="character")# colClasses all characters to retrieve correct data without losing and replacing by NAs.
names(cstock) 

#cstock<-read.xlsx(workbook, 1,colClasses=c("integer","integer", "integer","numeric", "integer", "numeric"))
str(cstock)
##transform data from 'chr' to proper format: 'num', 'int'
#cstock$ID<-as.vector(cstock$ID)# as 'ID' has a 'Y-1' format reformatting it to a factor returns NA, leave as is
cstock$plot<-as.factor(cstock$plot)
cstock$type<-as.factor(cstock$type)
cstock$mxdpt<-as.numeric(cstock$mxdpt)
cstock$lyr<-as.integer(cstock$lyr)
cstock$lthkn<-as.numeric(cstock$lthkn)
cstock$lstock<-as.numeric(cstock$lstock)
cstock$e<-as.numeric(cstock$e)
cstock$n<-as.numeric(cstock$n)
cstock$TPG<-as.factor(cstock$TPG)
cstock$sl<-as.numeric(cstock$sl)
```


```{r}
#pivot_wider creates columns of same row number with values from given column and names of new column by factor's level
cstock%>%
  select(plot, mxdpt, type)%>%#select a given columns
  group_by(plot, type)%>%#grouping by given factors
  summarise(mxdpt=mean(mxdpt, na.rm=T))%>%
  pivot_wider(names_from = type, values_from = mxdpt)%>%
  ggplot(aes(litter, soil))+
  geom_point()
 
```
`


